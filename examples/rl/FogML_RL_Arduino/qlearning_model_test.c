/*
   Copyright 2021 FogML

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/

static float Q_table[] = {0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 37.557986, 
0.000000, 0.000000, 
0.000000, 0.000000, 
53.995864, 64.691283, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
12.483977, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
436.400180, 58.579314, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
40.697625, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
28.841657, 55.559237, 
0.000000, 0.000000, 
0.000000, 0.000000, 
53.604903, 65.060291, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
534.507120, 218.548221, 
0.000000, 0.000000, 
0.000000, 0.000000, 
646.759029, 542.816302, 
0.253837, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
565.737580, 206.392723, 
0.000000, 0.000000, 
0.000000, 0.000000, 
717.077617, 665.576152, 
0.326355, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 27.750884, 
0.000000, 0.000000, 
0.000000, 0.000000, 
38.382120, 62.463298, 
0.000000, 0.000000, 
0.000000, 0.000000, 
66.015482, 48.065723, 
0.000000, 0.000000, 
0.000000, 0.000000, 
127.885895, 33.680352, 
0.000000, 0.000000, 
0.000000, 0.000000, 
650.056251, 448.531364, 
0.000000, 0.000000, 
0.000000, 0.000000, 
722.912753, 625.194875, 
0.598718, 0.000000, 
0.000000, 0.000000, 
94.886799, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
704.017055, 575.581040, 
0.000000, 0.000000, 
0.000000, 0.000000, 
724.344793, 657.210446, 
0.998786, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.489455, 23.191944, 
0.000000, 0.000000, 
0.000000, 0.000000, 
48.013332, 63.913101, 
0.000000, 0.000000, 
0.000000, 0.000000, 
89.759651, 34.651473, 
0.000000, 0.000000, 
0.000000, 0.000000, 
467.093712, 243.014131, 
0.000000, 0.000000, 
0.000000, 0.000000, 
721.421504, 686.444317, 
0.000000, 0.000000, 
0.000000, 0.000000, 
724.550349, 710.409919, 
1.421973, 0.000000, 
0.000000, 0.000000, 
558.498001, 373.413159, 
0.000000, 0.000000, 
0.000000, 0.000000, 
722.729849, 704.477422, 
0.000000, 0.000000, 
0.000000, 0.000000, 
701.293207, 724.121388, 
2.156170, 0.244950, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
55.791874, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
12.697514, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
1.732922, 56.544908, 
0.000000, 0.000000, 
0.000000, 0.000000, 
11.462823, 221.620583, 
0.000000, 0.000000, 
0.000000, 0.000000, 
45.850441, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
663.926896, 556.442957, 
0.000000, 0.000000, 
0.000000, 0.000000, 
724.580798, 718.845967, 
1.688255, 0.000000, 
0.000000, 0.000000, 
711.665856, 581.080294, 
2.400735, 0.100000, 
0.000000, 0.000000, 
585.572276, 693.167236, 
0.000000, 0.000000, 
0.000000, 0.000000, 
712.392306, 723.808500, 
0.210811, 0.000000, 
0.000000, 0.000000, 
637.538926, 706.654697, 
7.228656, 0.424175, 
0.000000, 0.000000, 
53.834104, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
63.789693, 19.374165, 
0.000000, 0.000000, 
0.000000, 0.000000, 
40.222598, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
24.255567, 0.866461, 
0.000000, 0.000000, 
0.000000, 0.000000, 
96.838113, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
54.915844, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
706.377364, 644.335868, 
0.000000, 0.000000, 
0.000000, 0.000000, 
683.419319, 724.376649, 
7.190572, 0.215057, 
0.000000, 0.000000, 
234.891982, 708.894347, 
3.709860, 0.461619, 
0.000000, 0.000000, 
619.331187, 700.343572, 
0.000000, 0.000000, 
0.000000, 0.000000, 
620.543921, 722.418630, 
9.302170, 0.000000, 
0.000000, 0.000000, 
189.382641, 644.289703, 
6.073894, 0.000000, 
0.000000, 0.000000, 
25.902462, 58.995050, 
0.000000, 0.000000, 
0.000000, 0.000000, 
72.708669, 34.370171, 
0.000000, 0.000000, 
0.000000, 0.000000, 
43.159326, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 25.469860, 
0.000000, 0.000000, 
0.000000, 0.000000, 
30.762840, 31.580273, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
535.353833, 707.286344, 
0.000000, 0.000000, 
0.000000, 0.000000, 
223.456571, 717.053310, 
18.480106, 0.000000, 
0.000000, 0.000000, 
0.000000, 44.304252, 
0.231784, 0.000000, 
0.000000, 0.000000, 
533.119195, 702.181916, 
0.000000, 0.000000, 
0.000000, 0.000000, 
363.015378, 678.665298, 
54.863216, 0.000000, 
0.000000, 0.000000, 
184.926678, 0.000000, 
15.108856, 0.000000, 
0.000000, 0.000000, 
69.970529, 16.375891, 
0.000000, 0.000000, 
0.000000, 0.000000, 
77.063869, 43.978565, 
0.000000, 0.000000, 
0.000000, 0.000000, 
31.484423, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
22.089214, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
167.932213, 565.192437, 
60.205210, 0.000000, 
0.000000, 0.000000, 
87.736157, 0.000000, 
41.376219, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
282.645316, 550.262985, 
196.137684, 14.396461, 
0.000000, 0.000000, 
119.742513, 295.679379, 
126.838184, 0.638525, 
0.000000, 0.000000, 
104.955075, 0.000000, 
51.070035, 0.000000, 
0.000000, 0.000000, 
77.178186, 61.184615, 
20.785988, 3.398401, 
0.000000, 0.000000, 
77.880295, 46.407097, 
9.715591, 0.000000, 
0.000000, 0.000000, 
31.637835, 0.000000, 
1.107662, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
0.000000, 0.000000, 
};

unsigned long RL_STATES = 576;
unsigned int  RL_ACTIONS = 2;

unsigned long internal_state;

void fogml_qlearning_init(){
}

void fogml_qlearning_update_state(unsigned long state){
    internal_state = state;
}

unsigned int fogml_qlearning_select_action(){
    unsigned long index = internal_state * RL_ACTIONS;

    unsigned int action = 0;
    float max = Q_table[index];

    for(int i = 0; i < RL_ACTIONS; i++){
        if (Q_table[index + i] > max) {
            max = Q_table[index + i];
            action = i;
            
        }
    }
    return action;
}
